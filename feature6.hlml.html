<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Library Management System</title>   

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

    <style>
        body {
            padding: 20px;
            background-color: #4caf50; 
            color: rgb(17, 17, 17);
        }

        .container {
            background-color: white; 
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .btn-custom {
            background-color: #4caf50;
            color: white;
        }

        .error-message {
            color: red;
            margin-top: 5px;
        }
    </style>

</head>
<body>

<div class="container">
    <h2>Assign Fine</h2>
    <form id="assignFineForm" method= "post">
        <div class="form-group">
            <label for="fineID">Fine ID:</label>
            <input type="text" class="form-control" id="fineID" required>
        </div>
        <div class="form-group">
            <label for="memberID">Member ID:</label>
            <input type="text" class="form-control" id="memberID" required>
        </div>
        <div class="form-group">
            <label for="bookID">Book ID:</label>
            <input type="text" class="form-control" id="bookID" required>
        </div>
        <div class="form-group">
            <label for="fineAmount">Fine Amount (LKR):</label>
            <input type="number" class="form-control" id="fineAmount" required>
            <small class="error-message" id="fineAmountError"></small>
        </div>
        <button type="button" class="btn btn-custom" onclick="assignFine()">Assign Fine</button>
		<button type="reset" class="btn btn-custom" style="background-color: #888888">Clear Data</button>
    </form>
</div>

<div class="container mt-4">
    <h2>Assigned Fines</h2>
    <table class="table">
        <thead>
            <tr>
                <th>Fine ID</th>
                <th>Member ID</th>
                <th>Member Name</th>
                <th>Book Name</th>
                <th>Fine Amount (LKR)</th>
                <th>Date Modified</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="fineTableBody">
            <!-- Assigned fines will be displayed here dynamically -->
        </tbody>
    </table>
</div>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>


<script>
    // Sample data (replace this with dynamic data from the server)
    const assignedFines = [];

    // Function to assign fines
    function assignFine() {
        // Fetch input values
        const fineID = document.getElementById('fineID').value;
        const memberID = document.getElementById('memberID').value;
        const bookID = document.getElementById('bookID').value;
        const fineAmount = document.getElementById('fineAmount').value;

        // Validate fine amount
        if (fineAmount < 2 || fineAmount > 500) {
            document.getElementById('fineAmountError').innerText = 'Fine amount must be between 2 LKR and 500 LKR.';
            return;
        }

        // Clear error message if validation passes
        document.getElementById('fineAmountError').innerText = '';

        assignedFines.push({
            fineID: fineID,
            memberID: memberID,
            memberName: `Member ${memberID.substring(1)}`, // Replace with actual member name retrieval logic
            bookName: `Book ${bookID.substring(1)}`, // Replace with actual book name retrieval logic
            fineAmount: fineAmount,
            dateModified: new Date().toLocaleString()
        });

        updateFineTable();
    }

    function updateFineTable() {
        const tableBody = document.getElementById('fineTableBody');
        tableBody.innerHTML = ''; // Clear existing rows

        // Iterate through assigned fines and create table rows
        assignedFines.forEach(fine => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${fine.fineID}</td>
                <td>${fine.memberID}</td>
                <td>${fine.memberName}</td>
                <td>${fine.bookName}</td>
                <td>${fine.fineAmount}</td>
                <td>${fine.dateModified}</td>
            `;
            tableBody.appendChild(row);
        });
    }

</script>

</body>
</html>
